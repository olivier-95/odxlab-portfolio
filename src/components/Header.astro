---
import Logo from './Logo.astro';
import { Menu, X } from 'lucide-astro';
---

<header
  class="fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200 transition-all"
  id="header"
>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
    <div class="flex items-center justify-between h-16 md:h-20">
      <!-- Logo -->
      <a href="#home" class="flex items-center hover:opacity-80 transition-opacity">
        <Logo responsive size={36} />
      </a>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center gap-8">
        <a
          href="#about"
          class="text-base font-medium text-dark hover:text-primary transition-colors"
        >
          About
        </a>
        <a
          href="#services"
          class="text-base font-medium text-dark hover:text-primary transition-colors"
        >
          Services
        </a>
        <a
          href="#work"
          class="text-base font-medium text-dark hover:text-primary transition-colors"
        >
          Work
        </a>
        <a
          href="#contact"
          class="px-6 py-2.5 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 hover:shadow-colorful transition-all hover:scale-105"
        >
          Contact
        </a>
      </nav>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="md:hidden p-2 text-dark hover:text-primary transition-colors"
        aria-label="Toggle menu"
      >
        <Menu class="w-6 h-6" id="menu-icon" />
        <X class="w-6 h-6 hidden" id="close-icon" />
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="hidden md:hidden bg-white border-t border-gray-200"
  >
    <nav class="container mx-auto px-4 py-4 flex flex-col gap-4">
      <a
        href="#about"
        class="px-4 py-3 text-base font-medium text-dark hover:text-primary hover:bg-light rounded-lg transition-colors mobile-nav-link"
      >
        About
      </a>
      <a
        href="#services"
        class="px-4 py-3 text-base font-medium text-dark hover:text-primary hover:bg-light rounded-lg transition-colors mobile-nav-link"
      >
        Services
      </a>
      <a
        href="#work"
        class="px-4 py-3 text-base font-medium text-dark hover:text-primary hover:bg-light rounded-lg transition-colors mobile-nav-link"
      >
        Work
      </a>
      <a
        href="#contact"
        class="px-4 py-3 bg-primary text-white text-center rounded-lg font-medium hover:bg-primary/90 transition-colors mobile-nav-link"
      >
        Contact
      </a>
    </nav>
  </div>
</header>

<!-- Add spacing to prevent content from hiding behind fixed header -->
<div class="h-16 md:h-20"></div>

<script>
  // Mobile menu toggle
  const menuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');

  menuButton?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
    menuIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
  });

  // Close mobile menu when clicking a link
  const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
  mobileNavLinks.forEach((link) => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
      menuIcon?.classList.remove('hidden');
      closeIcon?.classList.add('hidden');
    });
  });

  // Header scroll effect
  let lastScroll = 0;
  const header = document.getElementById('header');

  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;

    if (currentScroll > 50) {
      header?.classList.add('shadow-sm');
    } else {
      header?.classList.remove('shadow-sm');
    }

    lastScroll = currentScroll;
  });
</script>
